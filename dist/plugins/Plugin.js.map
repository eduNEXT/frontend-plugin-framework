{"version":3,"file":"Plugin.js","names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_react2","_i18n","_hooks","_constants","_Plugin","_jsxRuntime","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","_toPropertyKey","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","ErrorFallbackDefault","formatMessage","useIntl","jsx","children","messages","unexpectedError","Plugin","_ref","className","style","ready","ErrorFallbackComponent","dimensions","setDimensions","useState","width","height","finalStyle","useMemo","ErrorFallback","useHostEvent","PLUGIN_RESIZE","_ref2","payload","useEffect","dispatchMountedEvent","dispatchUnmountedEvent","dispatchReadyEvent","ErrorBoundary","fallbackComponent","_default","propTypes","PropTypes","node","isRequired","string","func","bool","shape","defaultProps"],"sources":["../../src/plugins/Plugin.jsx"],"sourcesContent":["'use client';\n\nimport React, {\n  useEffect, useMemo, useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { ErrorBoundary } from '@edx/frontend-platform/react';\nimport { useIntl } from '@edx/frontend-platform/i18n';\n\nimport {\n  dispatchMountedEvent, dispatchReadyEvent, dispatchUnmountedEvent, useHostEvent,\n} from './data/hooks';\nimport { PLUGIN_RESIZE } from './data/constants';\nimport messages from './Plugin.messages';\n\n// TODO: create example-plugin-app/src/PluginOne.jsx for example of customizing errorFallback as part of APER-3042 https://2u-internal.atlassian.net/browse/APER-3042\nfunction ErrorFallbackDefault() {\n  const { formatMessage } = useIntl();\n  return (\n    <div>\n      <h2>\n        {formatMessage(messages.unexpectedError)}\n      </h2>\n    </div>\n  );\n}\n\nfunction Plugin({\n  children, className, style, ready, ErrorFallbackComponent,\n}) {\n  const [dimensions, setDimensions] = useState({\n    width: null,\n    height: null,\n  });\n\n  const finalStyle = useMemo(() => ({\n    ...dimensions,\n    ...style,\n  }), [dimensions, style]);\n\n  // Need to confirm: When an error is caught here, the logging will be sent to the child MFE's logging service\n\n  const ErrorFallback = ErrorFallbackComponent || ErrorFallbackDefault;\n\n  useHostEvent(PLUGIN_RESIZE, ({ payload }) => {\n    setDimensions({\n      width: payload.width,\n      height: payload.height,\n    });\n  });\n\n  useEffect(() => {\n    dispatchMountedEvent();\n\n    return () => {\n      dispatchUnmountedEvent();\n    };\n  }, []);\n\n  useEffect(() => {\n    /** Ready defaults to true, but can be used to defer rendering the Plugin until certain processes have\n     * occurred or conditions have been met */\n    if (ready) {\n      dispatchReadyEvent();\n    }\n  }, [ready]);\n\n  return (\n    <div className={className} style={finalStyle}>\n      <ErrorBoundary\n        fallbackComponent={<ErrorFallback />}\n      >\n        {children}\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default Plugin;\n\nPlugin.propTypes = {\n  /** The content for the Plugin */\n  children: PropTypes.node.isRequired,\n  /** Classes to apply to the Plugin wrapper component */\n  className: PropTypes.string,\n  /** Custom error fallback component */\n  ErrorFallbackComponent: PropTypes.func,\n  /** If ready is true, it will render the Plugin */\n  ready: PropTypes.bool,\n  /** Styles to apply to the Plugin wrapper component */\n  style: PropTypes.shape({}),\n};\n\nPlugin.defaultProps = {\n  className: null,\n  ErrorFallbackComponent: null,\n  style: {},\n  ready: true,\n};\n"],"mappings":"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","ignoreList":[]}