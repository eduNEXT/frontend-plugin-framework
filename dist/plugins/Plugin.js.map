{"version":3,"file":"Plugin.js","names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_react2","_i18n","_hooks","_constants","_Plugin","_jsxRuntime","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","ErrorFallbackDefault","formatMessage","useIntl","jsx","children","messages","unexpectedError","Plugin","_ref","className","style","ready","ErrorFallbackComponent","dimensions","setDimensions","useState","width","height","finalStyle","useMemo","ErrorFallback","useHostEvent","PLUGIN_RESIZE","_ref2","payload","useEffect","dispatchMountedEvent","dispatchUnmountedEvent","dispatchReadyEvent","ErrorBoundary","fallbackComponent","_default","propTypes","PropTypes","node","isRequired","string","func","bool","shape","defaultProps","undefined"],"sources":["../../src/plugins/Plugin.jsx"],"sourcesContent":["'use client';\n\nimport React, {\n  useEffect, useMemo, useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { ErrorBoundary } from '@edx/frontend-platform/react';\nimport { useIntl } from '@edx/frontend-platform/i18n';\n\nimport {\n  dispatchMountedEvent, dispatchReadyEvent, dispatchUnmountedEvent, useHostEvent,\n} from './data/hooks';\nimport { PLUGIN_RESIZE } from './data/constants';\nimport messages from './Plugin.messages';\n\n// TODO: create example-plugin-app/src/PluginOne.jsx for example of customizing errorFallback as part of APER-3042 https://2u-internal.atlassian.net/browse/APER-3042\nfunction ErrorFallbackDefault() {\n  const { formatMessage } = useIntl();\n  return (\n    <div>\n      <h2>\n        {formatMessage(messages.unexpectedError)}\n      </h2>\n    </div>\n  );\n}\n\nfunction Plugin({\n  children, className, style, ready, ErrorFallbackComponent,\n}) {\n  const [dimensions, setDimensions] = useState({\n    width: null,\n    height: null,\n  });\n\n  const finalStyle = useMemo(() => ({\n    ...dimensions,\n    ...style,\n  }), [dimensions, style]);\n\n  // Need to confirm: When an error is caught here, the logging will be sent to the child MFE's logging service\n\n  const ErrorFallback = ErrorFallbackComponent || ErrorFallbackDefault;\n\n  useHostEvent(PLUGIN_RESIZE, ({ payload }) => {\n    setDimensions({\n      width: payload.width,\n      height: payload.height,\n    });\n  });\n\n  useEffect(() => {\n    dispatchMountedEvent();\n\n    return () => {\n      dispatchUnmountedEvent();\n    };\n  }, []);\n\n  useEffect(() => {\n    /** Ready defaults to true, but can be used to defer rendering the Plugin until certain processes have\n     * occurred or conditions have been met */\n    if (ready) {\n      dispatchReadyEvent();\n    }\n  }, [ready]);\n\n  return (\n    <div className={className} style={finalStyle}>\n      <ErrorBoundary\n        fallbackComponent={<ErrorFallback />}\n      >\n        {children}\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default Plugin;\n\nPlugin.propTypes = {\n  /** The content for the Plugin */\n  children: PropTypes.node.isRequired,\n  /** Classes to apply to the Plugin wrapper component */\n  className: PropTypes.string,\n  /** Custom error fallback component */\n  ErrorFallbackComponent: PropTypes.func,\n  /** If ready is true, it will render the Plugin */\n  ready: PropTypes.bool,\n  /** Styles to apply to the Plugin wrapper component */\n  style: PropTypes.shape({}),\n};\n\nPlugin.defaultProps = {\n  className: undefined,\n  ErrorFallbackComponent: null,\n  style: {},\n  ready: true,\n};\n"],"mappings":"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","ignoreList":[]}